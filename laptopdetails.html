<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Document</title>
    <style type="text/css">
        #main_container
        {
        display: flex;
        justify-content: center;
        flex-direction: column;
        align-content: center;
        align-items: center;
        }
        #laptop_header
        {
        display: flex;
        flex-direction: row;
        align-items: center;
        }
    </style>
</head>
<body>
    
    <div id="main_container">
        
        <div>
            <a href="laptoplist.html"><button><</button></a>
            <h3>ლეპტოპის ინფო</h3>
        </div>

        <div id="laptop_header">
            <div>
                <img id="laptop_image">
            </div>
            <div>
                <ul>
                    <li>სახელი: <span id="user_name"></span></li>
                    <li>თიმი: <span id="user_team"></span></li>
                    <li>პოზიცია: <span></span></li>
                    <li>მეილი: <span></span></li>
                    <li>ტელ ნომერი: <span></span></li>
                </ul>
            </div>
        </div>
    </div>


<script type="text/javascript">
    let baseUrl = (window.location).href;
    let laptopId = baseUrl.substring(baseUrl.lastIndexOf('#') + 1);

    let userTeamData = [];
    let imageWithSource = document.getElementById('laptop_image');
    let userName = document.getElementById('user_name');
    let userTeam = document.getElementById('user_team');

    let getTeams = {
        method: 'get',
        url: 'https://pcfy.redberryinternship.ge/api/teams',
        headers: { 
        'accept': 'application/json'
        }
    };
    axios(getTeams)
    .then(function (response) {
       userTeamData.push(response.data.data);
    })
    .catch(function (error) {
        console.log(error);
    });




    let getLaptop = {
        method: 'get',
        url: 'https://pcfy.redberryinternship.ge/api/laptop/'+laptopId+'?token=7e56e87167b06a62b2d51d028a28065d',
        headers: { 
        'accept': 'application/json'
        }
    };
    axios(getLaptop)
    .then(function (response) {
        let userVariable = response.data.data.user;
        let laptopVariable = response.data.data.laptop;
        imageWithSource.src = 'https://pcfy.redberryinternship.ge/'+laptopVariable.image+'';
        userName.textContent = userVariable.name +" "+userVariable.surname;
        userTeam.innerText = userTeamData[0][userVariable.team_id - 1].name;
    })
    .catch(function (error) {
        console.log(error);
    });




</script>
</body>
</html>